<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nodinopro - AI K53 Learner's License Preparation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .sign-card { transition: transform 0.3s ease; }
        .sign-card:hover { transform: translateY(-5px); }
        body { font-family: system-ui, -apple-system, sans-serif; }
        .quiz-option { cursor: pointer; }
        .max-w-content { max-width: fit-content; }
        .overflow-visible { overflow: visible !important; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-xl">N</span>
                    </div>
                    <span class="ml-3 text-xl font-bold text-gray-800">Nodinopro</span>
                </div>
                
                <!-- Dynamic Navigation -->
                <div id="auth-nav" class="flex items-center space-x-6">
                    <!-- Shows when user is logged out -->
                    <div id="logged-out-nav">
                        <a href="#learn" class="text-gray-700 hover:text-blue-600 font-medium">Learn</a>
                        <a href="#test" class="text-gray-700 hover:text-blue-600 font-medium">Test</a>
                        <a href="#pricing" class="text-gray-700 hover:text-blue-600 font-medium">Get Access</a>
                        <button onclick="showLoginModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Login</button>
                    </div>
                    
                    <!-- Shows when user is logged in -->
                    <div id="logged-in-nav" class="hidden">
                        <a href="#dashboard" class="text-gray-700 hover:text-blue-600 font-medium">Dashboard</a>
                        <a href="#learn" class="text-gray-700 hover:text-blue-600 font-medium">Learn</a>
                        <a href="#test" class="text-gray-700 hover:text-blue-600 font-medium">Test</a>
                        <span id="user-email" class="text-gray-700"></span>
                        <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- User Dashboard -->
    <section id="dashboard" class="hidden py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-3xl font-bold mb-8">My Learning Dashboard</h2>
            
            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Progress Overview</h3>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Road Signs Mastery</span>
                                <span id="signs-progress">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="signs-progress-bar" class="bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-1">
                                <span>Test Readiness</span>
                                <span id="test-readiness">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="test-readiness-bar" class="bg-green-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Quick Actions</h3>
                    <div class="space-y-3">
                        <button onclick="startLearning()" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Continue Learning</button>
                        <button onclick="takeTest()" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">Take Practice Test</button>
                        <button onclick="viewProgress()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">View Detailed Progress</button>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl p-6 shadow-lg">
                    <h3 class="text-xl font-semibold mb-4">Subscription Status</h3>
                    <div id="subscription-status" class="text-lg font-semibold text-orange-600">Free Trial</div>
                    <p class="text-gray-600 mt-2">Upgrade to access all features</p>
                    <button onclick="scrollToPayment()" class="w-full bg-yellow-500 text-white py-2 rounded-lg hover:bg-yellow-600 mt-4">Upgrade Now</button>
                </div>
            </div>
            
            <!-- Learning Modules -->
            <div id="learning-content" class="bg-white rounded-xl p-6 shadow-lg">
                <h3 class="text-2xl font-semibold mb-6">Road Signs Learning Modules</h3>
                <div id="modules-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Modules loaded dynamically -->
                </div>
            </div>

            <!-- Road Signs Library -->
            <div class="bg-white rounded-xl p-6 shadow-lg mt-8">
                <h3 class="text-2xl font-semibold mb-6">Road Signs Library</h3>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4" id="road-signs-container">
                    <!-- Road signs loaded dynamically -->
                </div>
            </div>
        </div>
    </section>

    <!-- Hero Section -->
    <section id="hero" class="gradient-bg text-white py-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h1 class="text-5xl font-bold mb-6">Master Your K53 Learner's License</h1>
            <p class="text-xl mb-8 max-w-3xl mx-auto">AI-powered road sign learning and assessment platform. Pass your test with confidence using our intelligent learning system.</p>
            <button onclick="scrollToPayment()" class="bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold text-lg hover:bg-gray-100 transition">Start Learning Now</button>
        </div>
    </section>

    <!-- Learning Modules -->
    <section id="learn" class="py-20 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-4">Interactive Learning Experience</h2>
            <p class="text-xl text-gray-600 text-center mb-12">Master all South African road signs with our AI-powered system</p>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-16">
                <div class="bg-white rounded-xl shadow-lg p-6 sign-card">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-traffic-light text-2xl text-blue-600"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Road Signs Library</h3>
                    <p class="text-gray-600 mb-4">Complete database of all official South African road signs</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6 sign-card">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-brain text-2xl text-green-600"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">AI Smart Tests</h3>
                    <p class="text-gray-600 mb-4">Adaptive tests that focus on your weak areas</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6 sign-card">
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-gamepad text-2xl text-purple-600"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Gamified Learning</h3>
                    <p class="text-gray-600 mb-4">Speed challenges and memory games</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6 sign-card">
                    <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4">
                        <i class="fas fa-chart-line text-2xl text-orange-600"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Progress Tracking</h3>
                    <p class="text-gray-600 mb-4">Real-time dashboard showing your mastery level</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Payment Section -->
    <section id="pricing" class="py-20 bg-white">
        <div class="max-w-4xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-4">Choose Your Plan</h2>
            <p class="text-xl text-gray-600 text-center mb-12">Flexible access options to suit your learning journey</p>
            
            <div class="grid md:grid-cols-3 gap-8 mb-8">
                <!-- 1 Month Plan -->
                <div class="bg-white rounded-2xl shadow-lg border-2 border-gray-100 p-6 text-center">
                    <div class="mb-6">
                        <div class="text-2xl font-bold text-gray-800 mb-2">1 Month</div>
                        <div class="text-4xl font-bold text-blue-600">R149</div>
                        <div class="text-gray-500 text-sm">Perfect for quick preparation</div>
                    </div>
                    <ul class="text-left space-y-3 mb-6">
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>All road signs access</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>Basic practice tests</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>Mobile friendly</span>
                        </li>
                    </ul>
                    <button onclick="selectPlan('1-month')" class="w-full bg-gray-100 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-200 transition">Select Plan</button>
                </div>

                <!-- 3 Months Plan - Recommended -->
                <div class="bg-gradient-to-b from-blue-500 to-purple-600 rounded-2xl shadow-2xl p-6 text-center text-white relative overflow-visible">
                    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 w-full max-w-content">
                        <span class="bg-green-500 text-white px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap">MOST POPULAR</span>
                    </div>
                    <div class="mt-4 mb-6">
                        <div class="text-2xl font-bold mb-2">3 Months</div>
                        <div class="text-4xl font-bold mb-1">R389</div>
                        <div class="text-blue-100 text-sm">Save R58 vs monthly</div>
                    </div>
                    <ul class="text-left space-y-3 mb-6">
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-300 mr-3"></i>
                            <span>All road signs access</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-300 mr-3"></i>
                            <span>AI-powered practice tests</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-300 mr-3"></i>
                            <span>Progress tracking</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-300 mr-3"></i>
                            <span>Gamified learning</span>
                        </li>
                    </ul>
                    <button onclick="selectPlan('3-months')" class="w-full bg-white text-blue-600 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">Select Plan</button>
                </div>

                <!-- 12 Months Plan -->
                <div class="bg-white rounded-2xl shadow-lg border-2 border-yellow-300 p-6 text-center">
                    <div class="mb-6">
                        <div class="text-2xl font-bold text-gray-800 mb-2">12 Months</div>
                        <div class="text-4xl font-bold text-blue-600">R999</div>
                        <div class="text-gray-500 text-sm">Best value - 44% savings</div>
                    </div>
                    <ul class="text-left space-y-3 mb-6">
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>All road signs access</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>Full AI assessment suite</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>Advanced progress analytics</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>Priority support</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-check text-green-500 mr-3"></i>
                            <span>Certificate of completion</span>
                        </li>
                    </ul>
                    <button onclick="selectPlan('12-months')" class="w-full bg-yellow-500 text-white py-3 rounded-lg font-semibold hover:bg-yellow-600 transition">Best Value</button>
                </div>
            </div>

            <!-- Payment Instructions -->
            <div class="bg-gray-50 rounded-xl p-6 border border-gray-200">
                <h3 class="text-xl font-semibold mb-4 text-center">Payment Instructions</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold mb-3">Bank Details:</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>Bank:</span>
                                <span class="font-semibold">FNB</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Account Name:</span>
                                <span class="font-semibold">Nodinopro</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Account Number:</span>
                                <span class="font-semibold">63152615523</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Reference:</span>
                                <span class="font-semibold">Your Cellphone Number</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-semibold mb-3">After Payment:</h4>
                        <button onclick="openWhatsApp()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold flex items-center justify-center w-full transition mb-3">
                            <i class="fab fa-whatsapp text-xl mr-3"></i>
                            Send Proof via WhatsApp
                        </button>
                        <p class="text-sm text-gray-600 text-center">Send to: <strong>062 801 0124</strong></p>
                        <p class="text-xs text-gray-500 text-center mt-1">Include your selected plan and cell number</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Demo Quiz -->
    <section id="test" class="py-20 bg-gray-50">
        <div class="max-w-4xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-4">Try Free Demo</h2>
            
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="text-center mb-8">
                    <div class="text-2xl font-semibold mb-6">What does this sign mean?</div>
                    <div class="w-32 h-32 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-6 text-4xl">
                        ðŸ›‘
                    </div>
                    <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                        <button class="quiz-option bg-gray-100 hover:bg-blue-100 p-4 rounded-lg border-2 border-transparent hover:border-blue-300 transition">Stop Sign</button>
                        <button class="quiz-option bg-gray-100 hover:bg-blue-100 p-4 rounded-lg border-2 border-transparent hover:border-blue-300 transition">Yield Sign</button>
                        <button class="quiz-option bg-gray-100 hover:bg-blue-100 p-4 rounded-lg border-2 border-transparent hover:border-blue-300 transition">No Entry</button>
                        <button class="quiz-option bg-gray-100 hover:bg-blue-100 p-4 rounded-lg border-2 border-transparent hover:border-blue-300 transition">Speed Limit</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Login/Signup Modals -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold mb-6">Login to Your Account</h3>
            <form onsubmit="handleLogin(event)">
                <input type="email" id="loginEmail" placeholder="Email" class="w-full p-3 border rounded-lg mb-4" required>
                <input type="password" id="loginPassword" placeholder="Password" class="w-full p-3 border rounded-lg mb-6" required>
                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700">Login</button>
            </form>
            <p class="text-center mt-4">
                Don't have an account? 
                <button onclick="showSignupModal()" class="text-blue-600 hover:underline">Sign up</button>
            </p>
            <button onclick="hideLoginModal()" class="absolute top-4 right-4 text-gray-500">âœ•</button>
        </div>
    </div>

    <div id="signupModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <h3 class="text-2xl font-bold mb-6">Create Your Account</h3>
            <form onsubmit="handleSignup(event)">
                <input type="text" id="signupName" placeholder="Full Name" class="w-full p-3 border rounded-lg mb-4" required>
                <input type="email" id="signupEmail" placeholder="Email" class="w-full p-3 border rounded-lg mb-4" required>
                <input type="password" id="signupPassword" placeholder="Password" class="w-full p-3 border rounded-lg mb-6" required>
                <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700">Create Account</button>
            </form>
            <p class="text-center mt-4">
                Already have an account? 
                <button onclick="showLoginModal()" class="text-blue-600 hover:underline">Login</button>
            </p>
            <button onclick="hideSignupModal()" class="absolute top-4 right-4 text-gray-500">âœ•</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-400">Â© 2025 Nodinopro. All rights reserved.</p>
            <p class="text-gray-400 mt-2">WhatsApp: 062 801 0124 | Email: nodinopro@gmail.com</p>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <script>
        // Your Firebase configuration - REPLACE WITH YOUR ACTUAL KEYS
        const firebaseConfig = {
            apiKey: "AIzaSyA5iMAkumEn63he362LdlgSlph47PI2M-8",
            authDomain: "nodinopro-f8619.firebaseapp.com",
            databaseURL: "https://nodinopro-f8619-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "nodinopro-f8619",
            storageBucket: "nodinopro-f8619.firebasestorage.app",
            messagingSenderId: "986804565375",
            appId: "1:986804565375:web:3867091cc598f86b56564a"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        // Road Signs Database
        const roadSigns = [
            {
                id: 1,
                name: "Stop Sign",
                emoji: "ðŸ›‘",
                meaning: "Come to a complete stop",
                category: "Regulatory",
                description: "You must bring your vehicle to a complete stop behind the stop line."
            },
            {
                id: 2,
                name: "Yield Sign",
                emoji: "âš ï¸",
                meaning: "Give way to other vehicles",
                category: "Regulatory", 
                description: "Slow down and give way to traffic on the major road."
            },
            {
                id: 3,
                name: "No Entry",
                emoji: "ðŸš«",
                meaning: "Do not enter this road",
                category: "Prohibition",
                description: "Vehicles are prohibited from entering this road."
            },
            {
                id: 4,
                name: "Speed Limit 60",
                emoji: "60",
                meaning: "Maximum speed 60 km/h",
                category: "Regulatory",
                description: "Do not exceed 60 kilometers per hour."
            },
            {
                id: 5,
                name: "Pedestrian Crossing",
                emoji: "ðŸš¶",
                meaning: "Pedestrian crossing ahead",
                category: "Warning",
                description: "Be prepared to stop for pedestrians crossing the road."
            },
            {
                id: 6,
                name: "School Zone",
                emoji: "ðŸ«",
                meaning: "School area ahead",
                category: "Warning",
                description: "Reduce speed and watch for children crossing."
            }
        ];

        const learningModules = [
            { id: 1, name: "Regulatory Signs", description: "Signs that give orders", color: "blue", completed: false },
            { id: 2, name: "Warning Signs", description: "Signs that warn of hazards", color: "orange", completed: false },
            { id: 3, name: "Information Signs", description: "Signs that provide information", color: "green", completed: false },
            { id: 4, name: "Prohibition Signs", description: "Signs that prohibit actions", color: "red", completed: false }
        ];

        // Authentication Functions
        function showLoginModal() {
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function hideLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
        }

        function showSignupModal() {
            document.getElementById('signupModal').classList.remove('hidden');
            hideLoginModal();
        }

        function hideSignupModal() {
            document.getElementById('signupModal').classList.add('hidden');
        }

        async function handleSignup(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Send email verification
                await user.sendEmailVerification();
                
                // Save user data
                await db.ref('users/' + user.uid).set({
                    name: name,
                    email: email,
                    emailVerified: false,
                    createdAt: firebase.database.ServerValue.TIMESTAMP,
                    subscription: 'trial',
                    progress: {},
                    completedModules: [],
                    testScores: {}
                });
                
                hideSignupModal();
                alert('Account created successfully! Please check your email for verification link.');
                
            } catch (error) {
                alert('Error creating account: ' + error.message);
            }
        }

        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                await auth.signInWithEmailAndPassword(email, password);
                hideLoginModal();
            } catch (error) {
                alert('Error logging in: ' + error.message);
            }
        }

        async function logout() {
            try {
                await auth.signOut();
            } catch (error) {
                alert('Error logging out: ' + error.message);
            }
        }

        // Load Learning Content
        function loadLearningContent(userId) {
            // Load modules
            const modulesContainer = document.getElementById('modules-container');
            modulesContainer.innerHTML = '';
            
            learningModules.forEach(module => {
                const moduleElement = document.createElement('div');
                moduleElement.className = `bg-${module.color}-50 p-4 rounded-lg border-2 border-${module.color}-200`;
                moduleElement.innerHTML = `
                    <h4 class="font-semibold mb-2">${module.name}</h4>
                    <p class="text-sm text-gray-600 mb-3">${module.description}</p>
                    <button onclick="startModule(${module.id})" class="bg-${module.color}-600 text-white px-3 py-1 rounded text-sm">Start Learning</button>
                `;
                modulesContainer.appendChild(moduleElement);
            });

            // Load road signs
            const signsContainer = document.getElementById('road-signs-container');
            signsContainer.innerHTML = '';
            
            roadSigns.forEach(sign => {
                const signElement = document.createElement('div');
                signElement.className = 'bg-white p-4 rounded-lg border-2 border-gray-200 text-center';
                signElement.innerHTML = `
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl">
                        ${sign.emoji}
                    </div>
                    <h4 class="font-semibold mb-1">${sign.name}</h4>
                    <p class="text-sm text-gray-600 mb-2">${sign.meaning}</p>
                    <span class="inline-block bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">${sign.category}</span>
                `;
                signsContainer.appendChild(signElement);
            });
        }

        function startModule(moduleId) {
            alert(`Starting module ${moduleId} - This would open the detailed learning interface`);
        }

        function startLearning() {
            alert('Opening learning interface with all modules...');
        }

        function takeTest() {
            alert('Starting comprehensive practice test...');
        }

        function viewProgress() {
            alert('Showing detailed progress analytics...');
        }

        // Auth State Listener
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                document.getElementById('logged-out-nav').classList.add('hidden');
                document.getElementById('logged-in-nav').classList.remove('hidden');
                document.getElementById('user-email').textContent = user.email;
                
                // Load user-specific content
                loadLearningContent(user.uid);
                
                // Show dashboard, hide public sections
                document.getElementById('dashboard').classList.remove('hidden');
                document.getElementById('hero').classList.add('hidden');
                document.getElementById('learn').classList.add('hidden');
                document.getElementById('pricing').classList.add('hidden');
                document.getElementById('test').classList.add('hidden');
                
            } else {
                // User is signed out
                document.getElementById('logged-out-nav').classList.remove('hidden');
                document.getElementById('logged-in-nav').classList.add('hidden');
                
                // Show public sections, hide dashboard
                document.getElementById('dashboard').classList.add('hidden');
                document.getElementById('hero').classList.remove('hidden');
                document.getElementById('learn').classList.remove('hidden');
                document.getElementById('pricing').classList.remove('hidden');
                document.getElementById('test').classList.remove('hidden');
            }
        });

        // Your existing functions
        let selectedPlan = '3-months';

        function scrollToPayment() {
            document.getElementById('pricing').scrollIntoView({ behavior: 'smooth' });
        }

        function selectPlan(plan) {
            selectedPlan = plan;
            document.querySelectorAll('button').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-blue-500', 'ring-offset-2');
            });
            event.target.classList.add('ring-2', 'ring-blue-500', 'ring-offset-2');
        }

        function openWhatsApp() {
            const planDetails = {
                '1-month': { price: 149, duration: '1 month' },
                '3-months': { price: 389, duration: '3 months' },
                '12-months': { price: 999, duration: '12 months' }
            };
            
            const plan = planDetails[selectedPlan];
            const message = `Hello Nodinopro, I want to purchase the ${plan.duration} plan for R${plan.price}. My cellphone number is: `;
            window.open(`https://wa.me/27628010124?text=${encodeURIComponent(message)}`, '_blank');
        }

        // Quiz functionality
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.quiz-option').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('.quiz-option').forEach(btn => {
                        btn.classList.remove('bg-green-100', 'border-green-500', 'bg-red-100', 'border-red-500');
                    });
                    
                    if (this.textContent === 'Stop Sign') {
                        this.classList.add('bg-green-100', 'border-green-500');
                        setTimeout(() => {
                            alert('Correct! ðŸŽ‰ This is a Stop Sign. You must come to a complete stop.');
                        }, 300);
                    } else {
                        this.classList.add('bg-red-100', 'border-red-500');
                        setTimeout(() => {
                            alert('Incorrect. This is a Stop Sign. You must come to a complete stop.');
                        }, 300);
                    }
                });
            });
        });
    </script>
</body>
</html>
